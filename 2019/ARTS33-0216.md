# ARTS-33 2019-02-13


> 
- Algorithm: [961. N-Repeated Element in Size 2N Array](https://leetcode.com/problems/n-repeated-element-in-size-2n-array/)
- Review: [Thread-Safe Collections](https://medium.com/elp-2018/thread-safe-collections-8f1f17c283e7)
- Tip: 使用 lombok @Slf4j 注解简化日志开发
- Share: AOP 分享PPT



## Algorithm
```java
package org.nocoder.leetcode.solution;

import java.util.HashMap;
import java.util.Map;

/**
 * 961. N-Repeated Element in Size 2N Array
 *
 * In a array A of size 2N, there are N+1 unique elements, and exactly one of these elements is repeated N times.
 *
 * Return the element repeated N times.
 *
 *
 * Example 1:
 *
 * Input: [1,2,3,3]
 * Output: 3
 * Example 2:
 *
 * Input: [2,1,2,5,3,2]
 * Output: 2
 * Example 3:
 *
 * Input: [5,1,5,2,5,3,5,4]
 * Output: 5
 *
 *
 * Note:
 *
 * 4 <= A.length <= 10000
 * 0 <= A[i] < 10000
 * A.length is even
 *
 * @author jason
 * @date 2019/2/17.
 */
public class NRepeatedElementinSize2NArray {

    public static int repeatedNTimes(int[] arr) {
        // 4 <= A.length <= 10000, A.length is even
        if(arr == null || (arr.length < 4 || arr.length > 10000) || (arr.length % 2 != 0)){
            throw new IllegalArgumentException();
        }

        Map<Integer, Integer> elements = new HashMap<>();

        for (int i = 0; i < arr.length; i++) {
            if (arr[i] < 0 || arr[i] >= 10000){
                throw new IllegalArgumentException();
            }
            if(elements.put(arr[i],1) != null){
                return arr[i];
            }

        }
        return 0;
    }

    public static void main(String[] args) {
        int[] arr = new int[]{5,1,5,2,5,3,5,4};
        System.out.println(repeatedNTimes(arr));
    }
}

```

## Review

### [Thread-Safe Collections](https://medium.com/elp-2018/thread-safe-collections-8f1f17c283e7)

- 为什么需要线程安全的集合
	- 多线程同时写出
	- 同时读写
	- 多线程同时读
	- 写之前读
- 什么是线程安全的集合
	- 线程安全集合是可以在没有竞争条件的情况下同时由多个线程访问的集合
- 怎么工作的
- 如何使用
	- Java `java.util.concurrent` 包下的 BlockingQueue， ConcurrentHashMap， ConcurrentSkipListMap 
	- Python `Queue`, `Deques`
	- Go 中 `channels ` 

## Tip

### IDEA lombok @Slf4j 简化日志开发

lombok 为我们提供了很多便捷的注解来简化开发，使用 `@Slf4j` 后可以直接使用 `log` 变量来记录日志。 在IDEA 下使用这个注解，需要本地环境的支持，安装 `lombok` 插件。
![idea_lombok_plugin](https://raw.githubusercontent.com/yangjinlong86/arts/master/2019/images/idea_lombok_plugin.png)

配置完成后，需要重新启动 idea

引入 lombok jar 文件，maven 项目中，在 pom.xml 中添加以下依赖

```xml
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.16.18</version>
</dependency>
```

```java
package org.nocoder.demo;

import lombok.extern.slf4j.Slf4j;

/**
 * Test Slf4j annotation
 * @author jason
 * @date 2019/2/18.
 */
@Slf4j
public class TestSlf4j {
    public static void main(String[] args) {
        log.debug("hello world!");
        String user = "Jason";
        log.info("hello, {}", user);
    }
}
```

输出

```
15:21:28.510 [main] DEBUG org.nocoder.demo.TestSlf4j - hello world!
15:29:29.312 [main] INFO org.nocoder.demo.TestSlf4j - hello, Jason
```
## Share

### 面向切面编程

这是我们部门内部的aop入门分享 [AOP PPT](https://github.com/yangjinlong86/arts/blob/master/2019/aop-arts33.pptx)


